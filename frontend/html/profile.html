<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ff4500">
    <title>Mon Compte - Shek's House</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Styles -->
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/profile.css">
    <link rel="stylesheet" href="../css/password.css">

    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="../assets/images/logos/logoShek.jpg">
</head>
<body>

    <!-- ============================================
         LOGIN SECTION
         ============================================ -->
    <section id="login-form-section" class="auth-section">
        <div class="auth-card">
            <div class="auth-header">
                <a href="../index.html" class="auth-logo">
                    <img src="../assets/images/logos/logoShek.jpg" alt="Logo">
                </a>
                <h1>Bienvenue</h1>
                <p>Connectez-vous a votre compte</p>
            </div>

            <form id="login-form" class="auth-form">
                <div class="form-group">
                    <label for="email">
                        <i class="fas fa-envelope"></i>
                        Email ou Telephone
                    </label>
                    <input type="email" id="email" placeholder="exemple@email.com" required>
                </div>

                <div class="form-group">
                    <label for="password">
                        <i class="fas fa-lock"></i>
                        Mot de passe
                    </label>
                    <div class="password-input">
                        <input type="password" id="password" placeholder="Votre mot de passe" required>
                        <button type="button" class="toggle-password" aria-label="Afficher le mot de passe">
                            <i class="far fa-eye"></i>
                        </button>
                    </div>
                    <a href="#" id="forgot-password-link" class="link-forgot">
                        Mot de passe oublie?
                    </a>
                </div>

                <button type="submit" class="btn-submit">
                    <span>Se connecter</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </form>

            <div class="auth-divider">
                <span>ou</span>
            </div>

            <div class="auth-actions">
                <button id="register-button" class="btn-register">
                    <i class="fas fa-user-plus"></i>
                    Creer un compte
                </button>
            </div>

            <a href="../index.html" class="back-to-shop">
                <i class="fas fa-arrow-left"></i>
                Retour a la boutique
            </a>
        </div>
    </section>

    <!-- ============================================
         FORGOT PASSWORD SECTION
         ============================================ -->
    <section id="forgot-password-section" style="display: none;">
        <div class="auth-card">
            <button class="back-btn-auth" onclick="showLogin()">
                <i class="fas fa-arrow-left"></i>
            </button>

            <div class="auth-header">
                <div class="icon-circle">
                    <i class="fas fa-lock"></i>
                </div>
                <h1>Mot de passe oublie?</h1>
                <p>Entrez votre email pour reinitialiser votre mot de passe</p>
            </div>

            <form id="forgot-password-form" class="auth-form">
                <div class="form-group">
                    <label for="reset-email">
                        <i class="fas fa-envelope"></i>
                        Adresse email
                    </label>
                    <input type="email" id="reset-email" placeholder="exemple@email.com" required>
                </div>
                <button type="submit" class="btn-submit">
                    <span>Envoyer le code</span>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </form>
        </div>

        <!-- Reset Code Step -->
        <div id="reset-code-section" class="auth-card" style="display: none;">
            <div class="auth-header">
                <div class="icon-circle success">
                    <i class="fas fa-envelope-open"></i>
                </div>
                <h1>Verifiez votre email</h1>
                <p>Un code a ete envoye a votre adresse email</p>
            </div>

            <form id="verify-code-form" class="auth-form">
                <div class="form-group">
                    <label for="reset-code">Code de verification</label>
                    <input type="text" id="reset-code" class="code-input" placeholder="------" maxlength="6" required>
                </div>
                <button type="submit" class="btn-submit">
                    <span>Verifier</span>
                    <i class="fas fa-check"></i>
                </button>
            </form>
        </div>

        <!-- New Password Step -->
        <div id="reset-password-section" class="auth-card" style="display: none;">
            <div class="auth-header">
                <div class="icon-circle">
                    <i class="fas fa-key"></i>
                </div>
                <h1>Nouveau mot de passe</h1>
                <p>Creez un nouveau mot de passe securise</p>
            </div>

            <form id="reset-password-form" class="auth-form">
                <div class="form-group">
                    <label for="new-password">Nouveau mot de passe</label>
                    <input type="password" id="new-password" placeholder="Min. 8 caracteres" required>
                </div>
                <div class="form-group">
                    <label for="confirm-password">Confirmer le mot de passe</label>
                    <input type="password" id="confirm-password" placeholder="Confirmez votre mot de passe" required>
                </div>
                <button type="submit" class="btn-submit">
                    <span>Reinitialiser</span>
                    <i class="fas fa-check"></i>
                </button>
            </form>
        </div>
    </section>

    <!-- ============================================
         PROFILE SECTION (with its own header)
         ============================================ -->
    <section id="profile-section" style="display: none;">
        <!-- Header for Profile -->
        <header id="profile-header"></header>

        <main class="profile-container">
            <!-- Profile Details Card -->
            <div class="profile-details">
                <div class="profile-header">
                    <div class="avatar-container">
                        <img id="profile-picture" src="../assets/images/logos/default_picture.jpg" alt="Profile">
                        <button class="edit-avatar" id="edit-avatar-btn">
                            <i class="fas fa-camera"></i>
                        </button>
                        <input type="file" id="profile-picture-input" accept="image/*" style="display: none;">
                    </div>
                    <h2 id="profile-fullname">Utilisateur</h2>
                    <p class="member-since">Membre depuis 2024</p>
                </div>

                <div class="profile-info">
                    <div class="info-item">
                        <i class="fas fa-user"></i>
                        <div>
                            <label>Nom</label>
                            <p id="profile-name"><span></span></p>
                        </div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-user-tag"></i>
                        <div>
                            <label>Prenom</label>
                            <p id="profile-surname"><span></span></p>
                        </div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-phone"></i>
                        <div>
                            <label>Telephone</label>
                            <p id="profile-phone"><span></span></p>
                        </div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <label>Email</label>
                            <p id="profile-email"><span></span></p>
                        </div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <div>
                            <label>Adresse</label>
                            <p id="profile-address"><span></span></p>
                        </div>
                    </div>
                </div>

                <div class="profile-actions">
                    <button id="modify-account" class="btn-action btn-edit">
                        <i class="fas fa-edit"></i>
                        Modifier le profil
                    </button>
                    <button id="logout-button" class="btn-action btn-logout">
                        <i class="fas fa-sign-out-alt"></i>
                        Deconnexion
                    </button>
                    <button id="delete-account" class="btn-action btn-delete">
                        <i class="fas fa-trash-alt"></i>
                        Supprimer le compte
                    </button>
                </div>
            </div>

            <!-- Profile Options Card -->
            <div class="profile-options">
                <div class="options-section">
                    <h3><i class="fas fa-history"></i> Historique</h3>
                    <div class="buttons-container">
                        <button id="orders-button" class="option-button">
                            <i class="fas fa-box"></i>
                            <span>Mes Commandes</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button id="messages-button" class="option-button">
                            <i class="fas fa-envelope"></i>
                            <span>Mes Messages</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button id="coupons-button" class="option-button">
                            <i class="fas fa-ticket-alt"></i>
                            <span>Mes Coupons</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>

                <div class="admin-buttons" style="display: none;">
                    <h3><i class="fas fa-shield-alt"></i> Administration</h3>
                    <div class="buttons-container">
                        <button id="add-product-button" class="admin-button">
                            <i class="fas fa-plus-circle"></i>
                            <span>Ajouter un article</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button id="manage-product-button" class="admin-button">
                            <i class="fas fa-cogs"></i>
                            <span>Gerer les articles</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button id="manage-users-button" class="admin-button">
                            <i class="fas fa-users-cog"></i>
                            <span>Gerer les utilisateurs</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button id="manage-catalog-button" class="admin-button">
                            <i class="fas fa-layer-group"></i>
                            <span>Gerer le catalogue</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button id="manage-coupons-button" class="admin-button">
                            <i class="fas fa-ticket-alt"></i>
                            <span>Gerer les coupons</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button id="manage-orders-button" class="admin-button">
                            <i class="fas fa-clipboard-list"></i>
                            <span>Gerer les commandes</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Modify Profile Modal -->
        <div id="modify-profile-section" class="modal-overlay" style="display: none;">
            <div class="modal-card">
                <button class="modal-close" onclick="hideModifySection()">
                    <i class="fas fa-times"></i>
                </button>
                <h2><i class="fas fa-user-edit"></i> Modifier le profil</h2>
                <form id="modify-profile-form" class="auth-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="mod-name">Nom</label>
                            <input type="text" id="mod-name" required>
                        </div>
                        <div class="form-group">
                            <label for="mod-surname">Prenom</label>
                            <input type="text" id="mod-surname" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="mod-phone">Telephone</label>
                        <input type="tel" id="mod-phone" required>
                    </div>
                    <div class="form-group">
                        <label for="mod-email">Email</label>
                        <input type="email" id="mod-email" required>
                    </div>
                    <div class="form-group">
                        <label for="mod-password">Nouveau mot de passe (optionnel)</label>
                        <input type="password" id="mod-password" placeholder="Laisser vide pour conserver l'actuel">
                    </div>
                    <div class="form-group">
                        <label for="mod-address">Adresse</label>
                        <input type="text" id="mod-address" required>
                    </div>
                    <button type="submit" class="btn-submit">
                        <span>Sauvegarder</span>
                        <i class="fas fa-check"></i>
                    </button>
                </form>
            </div>
        </div>

        <!-- Footer for Profile -->
        <footer id="profile-footer"></footer>
    </section>

    <!-- ============================================
         REGISTRATION SECTION
         ============================================ -->
    <section id="register-form-section" class="auth-section" style="display: none;">
        <div class="auth-card register-card">
            <button class="back-btn-auth" onclick="showLogin()">
                <i class="fas fa-arrow-left"></i>
            </button>

            <div class="auth-header">
                <a href="../index.html" class="auth-logo">
                    <img src="../assets/images/logos/logoShek.jpg" alt="Logo">
                </a>
                <h1>Creer un compte</h1>
                <p>Rejoignez la communaute Shek's House</p>
            </div>

            <form id="register-form" class="auth-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="reg-name">Nom</label>
                        <input type="text" id="reg-name" placeholder="Dupont" required>
                    </div>
                    <div class="form-group">
                        <label for="reg-surname">Prenom</label>
                        <input type="text" id="reg-surname" placeholder="Jean" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="reg-phone">Telephone</label>
                    <input type="tel" id="reg-phone" placeholder="+1 514-555-0000" required>
                </div>

                <div class="form-group">
                    <label for="reg-email">Email</label>
                    <input type="email" id="reg-email" placeholder="jean.dupont@email.com" required>
                </div>

                <div class="form-group">
                    <label for="reg-password">Mot de passe</label>
                    <input type="password" id="reg-password" placeholder="Min. 8 caracteres" required>
                </div>

                <div class="form-group">
                    <label for="reg-address">Adresse</label>
                    <input type="text" id="reg-address" placeholder="123 Rue Principale" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="reg-city">Ville</label>
                        <input type="text" id="reg-city" placeholder="Montreal" required>
                    </div>
                    <div class="form-group">
                        <label for="reg-postal-code">Code Postal</label>
                        <input type="text" id="reg-postal-code" placeholder="H1A 1A1" required>
                    </div>
                </div>

                <div class="terms-checkbox">
                    <input type="checkbox" id="terms" required>
                    <label for="terms">J'accepte les <a href="#">conditions d'utilisation</a></label>
                </div>

                <button type="submit" class="btn-submit">
                    <span>Creer mon compte</span>
                    <i class="fas fa-user-plus"></i>
                </button>
            </form>

            <p class="login-link">
                Deja membre? <a href="#" onclick="showLogin()">Se connecter</a>
            </p>
        </div>
    </section>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Scripts -->
    <script src="../js/config.js"></script>
    <script src="../js/components.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/cookie-consent.js"></script>
    <script src="../js/profile.js"></script>
    <script src="../js/password.js"></script>

    <script>
        function goBack() {
            window.location.href = '../index.html';
        }

        function showLogin() {
            document.getElementById('login-form-section').style.display = 'flex';
            document.getElementById('register-form-section').style.display = 'none';
            document.getElementById('forgot-password-section').style.display = 'none';
        }

        function hideModifySection() {
            document.getElementById('modify-profile-section').style.display = 'none';
        }

        // Initialize profile header and footer when logged in
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize header for profile section
            ShekComponents.initHeader({
                showSearch: false,
                showTabs: false,
                showBackButton: true,
                pageTitle: '<i class="fas fa-user-circle"></i> Mon Compte'
            }, '#profile-header');

            // Initialize footer for profile section
            ShekComponents.initFooter('profile', '#profile-footer');
        });

        // Toggle password visibility
        document.querySelectorAll('.toggle-password').forEach(btn => {
            btn.addEventListener('click', function() {
                const input = this.previousElementSibling;
                const icon = this.querySelector('i');
                if (input.type === 'password') {
                    input.type = 'text';
                    icon.classList.replace('fa-eye', 'fa-eye-slash');
                } else {
                    input.type = 'password';
                    icon.classList.replace('fa-eye-slash', 'fa-eye');
                }
            });
        });
    </script>

</body>
</html>
